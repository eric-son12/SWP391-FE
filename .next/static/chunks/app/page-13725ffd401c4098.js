(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1049:(e,t)=>{"use strict";Object.prototype.toString},4916:(e,t,s)=>{Promise.resolve().then(s.bind(s,8940))},6879:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(5155);let a=()=>(0,r.jsx)("div",{className:"flex flex-col items-center justify-center",children:"Dashboard"})},6972:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var r=s(5155),a=s(2115),n=s(5695),i=s(2177),l=s(285),d=s(9434);function o(e){let{className:t,type:s,...a}=e;return(0,r.jsx)("input",{type:s,"data-slot":"input",className:(0,d.cn)("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}var c=s(968);function u(e){let{className:t,...s}=e;return(0,r.jsx)(c.b,{"data-slot":"label",className:(0,d.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}function x(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,d.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function m(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,d.cn)("flex flex-col gap-1.5 px-6",t),...s})}function p(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,d.cn)("leading-none font-semibold",t),...s})}function f(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,d.cn)("text-muted-foreground text-sm",t),...s})}function h(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,d.cn)("px-6",t),...s})}function g(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,d.cn)("flex items-center px-6",t),...s})}let b={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"},j=0,S=new Map,T=e=>{if(S.has(e))return;let t=setTimeout(()=>{S.delete(e),N({type:b.REMOVE_TOAST,toastId:e})},1e6);S.set(e,t)},v=(e,t)=>{switch(t.type){case b.ADD_TOAST:return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case b.UPDATE_TOAST:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case b.DISMISS_TOAST:{let{toastId:s}=t;return s?T(s):e.toasts.forEach(e=>{T(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case b.REMOVE_TOAST:if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};default:return e}},A=[],y={toasts:[]};function N(e){y=v(y,e),A.forEach(e=>{e(y)})}function O(e){let{...t}=e,s=(j=(j+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>N({type:b.DISMISS_TOAST,toastId:s});return N({type:b.ADD_TOAST,toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>N({type:b.UPDATE_TOAST,toast:{...e,id:s}})}}var _=s(4093),E=s(8749),w=s(2657);let D=()=>{let e=(0,_.P)(e=>e.login),t=(0,n.useRouter)(),{toast:s}=function(){let[e,t]=a.useState(y);return a.useEffect(()=>(A.push(t),()=>{let e=A.indexOf(t);e>-1&&A.splice(e,1)}),[]),{...e,toast:O,dismiss:e=>N({type:b.DISMISS_TOAST,toastId:e})}}(),[d,c]=(0,a.useState)(!1),[j,S]=(0,a.useState)(!1),{register:T,handleSubmit:v,formState:{errors:D}}=(0,i.mN)(),I=async r=>{try{await e(r.username,r.password),s({title:"Login Successful",description:"Welcome back!"}),t.push("/dashboard")}catch(e){console.error("Login failed",e),s({title:"Login Failed",description:"Please check your credentials and try again",variant:"destructive"})}};return(0,r.jsx)("div",{className:"flex h-screen w-screen flex-col items-center justify-center",children:(0,r.jsxs)(x,{className:"w-full md:w-[500px] mx-3 md:mx-0",children:[(0,r.jsxs)(m,{className:"space-y-1",children:[(0,r.jsx)(p,{className:"text-2xl",children:"Login"}),(0,r.jsx)(f,{children:"Enter your credentials to access your account"})]}),(0,r.jsxs)("form",{onSubmit:v(I),children:[(0,r.jsxs)(h,{className:"grid gap-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(u,{htmlFor:"username",children:"Username"}),(0,r.jsx)(o,{id:"username",type:"username",...T("username")}),D.username&&(0,r.jsx)("span",{className:"text-red-500 text-sm",children:D.username.message})]}),(0,r.jsxs)("div",{className:"grid gap-2 relative",children:[(0,r.jsx)(u,{htmlFor:"password",children:"Password"}),(0,r.jsx)(o,{id:"password",type:j?"text":"password",...T("password")}),(0,r.jsx)("span",{className:"absolute top-8 right-3 cursor-pointer text-gray-500",onClick:()=>S(!j),children:j?(0,r.jsx)(E.A,{}):(0,r.jsx)(w.A,{})}),D.password&&(0,r.jsx)("span",{className:"text-red-500 text-sm",children:D.password.message})]})]}),(0,r.jsx)(g,{className:"mt-6 flex flex-col space-y-4",children:(0,r.jsx)(l.$,{type:"submit",className:"w-full",children:"Login"})})]})]})})}},8940:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(5155),a=s(2115),n=s(1092),i=s(4093),l=s(6972);let d=e=>{let{children:t,isAllowed:s,redirectPath:a="/"}=e;return s?t:(0,r.jsx)(n.C5,{to:a})};var o=s(6879);let c=()=>{let e=(0,i.P)(e=>e.loading.isLoading);return(0,r.jsx)(r.Fragment,{children:e&&(0,r.jsx)("div",{className:"fixed inset-0 z-[9999999] flex items-center justify-center bg-black bg-opacity-50",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-t-4 border-[#FE8282] border-opacity-50 border-t-[#FE8282]"})})})},u=()=>{let e=(0,i.P)(e=>e.profile.user),t=(0,a.useMemo)(()=>null==e?void 0:e.role,[e]),s=!!(null==e?void 0:e.token),c=[{path:"/",element:s&&("ROLE_STAFF"===t||"ROLE_ADMIN"===t)?(0,r.jsx)(n.C5,{to:"/dashboard"}):(0,r.jsx)(l.default,{})},{path:"/dashboard",element:(0,r.jsx)(d,{isAllowed:s&&("ROLE_STAFF"===t||"ROLE_ADMIN"===t),redirectPath:"/",children:(0,r.jsx)(o.default,{})})}];return(0,n.Ye)(c)},x=function(){return(0,r.jsxs)(n.Kd,{children:[(0,r.jsx)(u,{}),(0,r.jsx)(c,{})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[937,836,12,105,441,684,358],()=>t(4916)),_N_E=e.O()}]);